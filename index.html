<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Juegos</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="header">
    <h1>CAT√ÅLOGO DE JUEGOS</h1>
    <input type="text" id="buscador" placeholder="Buscar juego...">
</header>


<main class="catalogo">

    <div id="catalogo"></div>

    <!-- ANUNCIO -->
    <div class="ad-banner">
        <script async="async" data-cfasync="false"
            src="https://pl28702894.effectivegatecpm.com/e9b88537b08a4fa8771bee4ed59e98c7/invoke.js">
        </script>
        <div id="container-e9b88537b08a4fa8771bee4ed59e98c7"></div>
    </div>

</main>

<script src="js/data.js"></script>
<script>
const catalogo = document.getElementById("catalogo");
const buscador = document.getElementById("buscador");

function mostrarJuegos(filtro = "") {
    const juegosFiltrados = juegos.filter(j =>
        j.nombre.toLowerCase().includes(filtro.toLowerCase())
    );

    catalogo.innerHTML = "";

    if (juegosFiltrados.length === 0) {
        catalogo.innerHTML = `
            <div class="no-resultados">
                <h2>Juego no encontrado üòï</h2>
            </div>
        `;
        return;
    }

    juegosFiltrados.forEach((juego, index) => {

    // üëâ cada 4 juegos mete un banner
    if (index > 0 && index % 4 === 0) {
        catalogo.innerHTML += `
            <div class="ad-banner">
                <!-- PEG√ÅS AC√Å el c√≥digo de Adsterra -->
            </div>
        `;
    }

    catalogo.innerHTML += `
        <div class="card hidden">
            <img src="${juego.imagen}">
            <h2>${juego.nombre}</h2>
            <p>${juego.descripcion}</p>
            <a href="juego.html?id=${juego.id}" class="boton">
                Ver m√°s
            </a>
        </div>
    `;
});


    observarCards();
}

function observarCards() {
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add("show");
            }
        });
    });

    document.querySelectorAll(".hidden").forEach(el => observer.observe(el));
}

buscador.addEventListener("input", e => {
    mostrarJuegos(e.target.value);
});

mostrarJuegos();
</script>


</body>
</html>
